# Stronghold Environment Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# REQUIRED: Database Configuration
# =============================================================================

# PostgreSQL connection settings
DB_HOST=localhost
DB_PORT=5432
DB_USER=stronghold
DB_PASSWORD=change_me_in_production
DB_NAME=stronghold
DB_SSLMODE=require

# For Docker Compose, use these instead:
# DB_HOST=postgres
# DB_SSLMODE=disable

# =============================================================================
# REQUIRED: JWT Authentication
# =============================================================================

# Generate a strong random secret (at least 32 characters)
# Example: openssl rand -base64 32
JWT_SECRET=your_super_secret_jwt_key_change_this_in_production

# Token lifetimes (Go duration format)
ACCESS_TOKEN_TTL=15m
REFRESH_TOKEN_TTL=2160h

# =============================================================================
# REQUIRED: Dashboard Configuration
# =============================================================================

# URL where the dashboard is hosted
DASHBOARD_URL=http://localhost:3000

# Comma-separated list of allowed origins for CORS
DASHBOARD_ALLOWED_ORIGINS=http://localhost:3000,https://dashboard.stronghold.security

# =============================================================================
# REQUIRED: x402 Payment Configuration
# =============================================================================

# Your Ethereum wallet address for receiving payments (0x...)
X402_WALLET_ADDRESS=0x...

# x402 facilitator URL
X402_FACILITATOR_URL=https://x402.org/facilitator

# Network: base, base-sepolia, mainnet
X402_NETWORK=base

# =============================================================================
# REQUIRED (production): Stripe Crypto Onramp Configuration
# =============================================================================
# Get these from your Stripe dashboard: https://dashboard.stripe.com/apikeys
# Webhook secret from: https://dashboard.stripe.com/webhooks

STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
STRIPE_PUBLISHABLE_KEY=pk_test_...

# =============================================================================
# OPTIONAL: Stronghold Scanner Configuration
# =============================================================================

# Thresholds for threat detection (0.0 to 1.0)
STRONGHOLD_BLOCK_THRESHOLD=0.55
STRONGHOLD_WARN_THRESHOLD=0.35

# Enable/disable detection modules
STRONGHOLD_ENABLE_HUGOT=true
STRONGHOLD_ENABLE_SEMANTICS=true

# Path to Hugging Face models
HUGOT_MODEL_PATH=./models

# Optional: LLM-based detection provider (openai, anthropic)
STRONGHOLD_LLM_PROVIDER=
STRONGHOLD_LLM_API_KEY=

# =============================================================================
# OPTIONAL: Server Configuration
# =============================================================================

PORT=8080
SERVER_READ_TIMEOUT=10s
SERVER_WRITE_TIMEOUT=30s

# =============================================================================
# OPTIONAL: Pricing Configuration (USD per request)
# =============================================================================

PRICE_SCAN_CONTENT=0.001
PRICE_SCAN_OUTPUT=0.001

# =============================================================================
# REQUIRED (production): AWS KMS Configuration
# =============================================================================
# KMS is used to encrypt wallet private keys for cross-device access
# In development, KMS is optional - wallets are created locally

# AWS Region where your KMS key is located
KMS_REGION=us-east-1

# KMS Key ID - can be key ARN or alias
# Example: alias/stronghold-wallet-keys
# Example: arn:aws:kms:us-east-1:123456789:key/1234-5678-...
KMS_KEY_ID=alias/stronghold-wallet-keys

# =============================================================================
# DEVELOPMENT ONLY
# =============================================================================

# Set to 'true' to skip payment requirements in development
# DEV_SKIP_PAYMENTS=false

# Set to 'true' to enable debug logging
# DEBUG=false
